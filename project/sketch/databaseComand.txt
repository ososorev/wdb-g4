CREATE DATABASE stuffRequest
CHARACTER SET utf8 COLLATE utf8_unicode_ci;
	
CREATE TABLE users(
	id SERIAL, //BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE
	name VARCHAR(32) NOT NULL,
	password VARCHAR(32) NOT NULL,
	email VARCHAR(32) NOT NULL,
	phone VARCHAR(20) NOT NULL,
	avatar TEXT,
	address VARCHAR(150),
	timeStamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY(id),
	UNIQUE (email),
	UNIQUE (phone)
)ENGINE InnoDB CHARACTER SET utf8;
 
CREATE TABLE request(
	id SERIAL, //BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE
	userId BIGINT(20) UNSIGNED,
	title VARCHAR(32) NOT NULL,
	description TEXT,
	requestTime DATETIME NOT NULL,
	returnTime DATETIME NOT NULL,
	address VARCHAR(150),
	price DECIMAL(22,2),
	timeStamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY(id),
	FOREIGN KEY(userId)REFERENCES users(id)
	ON DELETE RESTRICT ON UPDATE CASCADE,
	INDEX(timeStamp),//для поиска по времени создания
	INDEX(price)
)ENGINE InnoDB CHARACTER SET utf8;

CREATE TABLE connections(
	userRequest BIGINT(20) UNSIGNED,
	userId BIGINT(20) UNSIGNED,
	FOREIGN KEY (userRequest) REFERENCES users(id)
	ON DELETE RESTRICT ON UPDATE CASCADE,
	FOREIGN KEY (userId) REFERENCES request(id)
	ON DELETE RESTRICT ON UPDATE CASCADE	
)ENGINE InnoDB CHARACTER SET utf8;
