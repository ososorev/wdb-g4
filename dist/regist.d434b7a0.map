{"version":3,"sources":["js/regist.js"],"names":["fetchData","event","preventDefault","form","document","querySelector","fetch","method","body","FormData","then","response","text","innerHTML","goto_email_confirm","window","location","href","addEventListener","RegForm","moduleRegForm","create","moduleFormTitle","FormMain","moduleFormMain","moduleUserDataForm","moduleRegistrationButton","moduleCheckBox","moduleBottomLink","forms","getElementsByClassName","Array","prototype","filter","call","checkValidity","stopPropagation","classList","add"],"mappings":";AAaA,SAASA,EAAUC,GACXA,EAAMC,iBACFC,IAAAA,EAAOC,SAASC,cAAc,QAgB1B,OAdRC,MAAM,2BAA4B,CAC9BC,OAAQ,OACRC,KAAM,IAAIC,SAASN,KAClBO,KAAK,SAAAC,GACCA,OAAAA,EAASC,SACfF,KAAK,SAAAE,GACM,0CAARA,EACFR,SAASC,cAAc,mBAAmBQ,UAAUD,EAIrDE,OAGG,EAGhB,SAASA,IACFC,OAAOC,SAASC,KAAK,qBAnC5Bb,SAASc,iBAAiB,mBAAoB,SAAUjB,GAChDkB,IAAAA,EAAUC,cAAcC,SAC5BC,gBAAgBD,OAAOF,GACnBI,IAAAA,EAAWC,eAAeH,OAAOF,GACrCM,mBAAmBJ,OAAOE,GAC1BG,yBAAyBL,OAAOE,GAChCI,eAAeN,OAAOE,GACtBK,iBAAiBP,OAAOF,KA+B5B,WACM,aACAJ,OAAOG,iBAAiB,OAAQ,WAC1BW,IAAAA,EAAQzB,SAAS0B,uBAAuB,oBAC3BC,MAAMC,UAAUC,OAAOC,KAAKL,EAAO,SAAS1B,GAC3DA,EAAKe,iBAAiB,SAAU,SAASjB,IACV,IAAzBE,EAAKgC,iBACPlC,EAAMC,iBACND,EAAMmC,mBAGNpC,EAAUC,GAEZE,EAAKkC,UAAUC,IAAI,mBAClB,OAEJ,GAhBT","file":"regist.d434b7a0.map","sourceRoot":"../renthings","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function (event) {\n    let RegForm = moduleRegForm.create();\n    moduleFormTitle.create(RegForm);\n    let FormMain = moduleFormMain.create(RegForm);\n    moduleUserDataForm.create(FormMain);\n    moduleRegistrationButton.create(FormMain);\n    moduleCheckBox.create(FormMain);\n    moduleBottomLink.create(RegForm);\n     \n    \n    \n});\n\nfunction fetchData(event) {\n        event.preventDefault();\n        var form = document.querySelector('form');\n      \n        fetch('renthings/php/regist.php', {\n            method: \"POST\",\n            body: new FormData(form),\n          }).then(response=>{\n            return response.text();\n          }).then(text => {\n            if (text == \"User with the same name already exists\") {\n              document.querySelector(\".for_fetch_data\").innerHTML=text;\n              \n            }\n           else {\n             goto_email_confirm();\n           }\n        });\n         return false;\n      }\n\nfunction goto_email_confirm() {\n       window.location.href='confirm_email.html';\n    }\n\n(function() {\n      'use strict';\n      window.addEventListener('load', function() {\n        var forms = document.getElementsByClassName('needs-validation');\n        var validation = Array.prototype.filter.call(forms, function(form) {\n          form.addEventListener('submit', function(event) {\n            if (form.checkValidity() === false) {\n              event.preventDefault();\n              event.stopPropagation();\n            }\n            else {\n              fetchData(event);\n            }  \n            form.classList.add('was-validated');\n          }, false);\n        });\n      }, false);\n    })();\n\n"]}